<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<!-- saved from url=(0076)http://www.uamt.feec.vutbr.cz/~richter/vyuka/PC2A/cviceni/06_soubory.html.cs -->
<html><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-2">
	
	<title></title>
	<meta name="GENERATOR" content="OpenOffice 4.0.1  (Win32)">
	<meta name="CREATED" content="0;0">
	<meta name="CHANGEDBY" content="M R">
	<meta name="CHANGED" content="20140318;8331486">
	<style type="text/css">
	<!--
		@page { size: 21cm 29.7cm; margin-left: 2cm; margin-right: 1cm; margin-top: 1cm; margin-bottom: 1cm }
		P { margin-bottom: 0.21cm }
		A:link { color: #000080; so-language: zxx; text-decoration: underline }
		A:visited { color: #800000; so-language: zxx; text-decoration: underline }
	-->
	</style>
</head>
<body lang="cs-CZ" link="#000080" vlink="#800000" dir="LTR">
<p><br><br>
</p>
<p align="CENTER"><font size="6" style="font-size: 22pt"><b>Práce se
soubory</b></font></p>
<p><br><br>
</p>
<p><font size="4" style="font-size: 16pt"><b>Kopie souborù</b></font></p>
<p>Napi¹te program, který pøekopíruje soubor ze zdrojového do
cílového souboru. Pokud cílový soubor existuje, vypí¹e hlá¹ení a
kopii neprovede. Názvy obou souborù budou zadány jako parametr
programu na pøíkazové øádce: C:\xxxxx\:&gt;&gt;kopiruj.exe zdroj.txt
cil.txt.</p>
<p><br><br>
</p>
<p><b>Zaènìte vývojovým diagramem (napø.):</b></p>
<p><i><b>první úroveò:</b></i></p>
<p>0. názvy souborù dodány jako parametr<br>1. úvod - inicializace -
kontrola parametrù, otevøení souboru a kontrola zda se povedlo<br>2.
vlastní èinnost - funkce se 2 parametry - otevøené soubory<br>3.
zavøení souborù - test zda se povedlo</p>
<p><br><br>
</p>
<p><i><b>druhá úroveò:</b></i></p>
<p><i>inicializace:</i></p>
<p>a: jsou pøítomny tøi paramery? -pokud ne - vypi¹ zprávu a
ukonèi<br>b: otevøi první soubor - otestuj ¾e se povedlo - pokud ne
vypi¹ zprávu a ukonèi<br>c: otevøi druhý soubor - otestuj ¾e se
povedlo - pokud ne vypi¹ zprávu,zavøi první soubor a ukonèi</p>
<p><i>vlastní èinnost: parametry - vstupní a výstupni stream</i></p>
<p>a: naèti znak ze vstupu<br>b: pokud je znak neplatný (je konec
souboru) skonèi<br>c: udìlej èinnost - ulo¾ znak do vystupu, vyplò
statistiku &#8230;<br>d: naèti znak ze vstupu<br>e: pokraèuj od b)</p>
<p><br><br>
</p>
<p>Pokraèovat a¾ do úrovnì pøíkazù programu</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><b>Postup øe¹ení na PC:</b></p>
<ol>
	<li><p>Nadefinujte si funkci main a v ní promìnné pro vstupní a
	výstupní soubor. Pro jména vstupního a výstupního souboru si (pro
	úvodní fázi) nadefinujte textová pole (øetìzce) s názvy souborù.
	Názvy vstupního a výstupního souboru vytisknìte na konzolu. Naètìte
	(include) pøíslu¹né knihovny nutné pro pøeklad. Program pøelo¾te a
	spus»te.</p>
	</li><li><p>Vytvoøte si vstupní soubor zdroj.txt na disku (pøedpokládáme
	práci s textovými soubory). Otevøete vstupní soubor pro ètení a
	proveïte o¹etøení neúspì¹ného otevøení. Vytisknìte zda se otevøení
	povedlo nebo ne. Pro ka¾dý otevøený soubor musí existovat jeho
	zavøení &#8211; zavøete soubor na konci programu. Program pøelo¾te a
	spus»te.</p>
	</li><li><p>Pomocí cyklu while, ve kterém budete naèítat postupnì znaky
	ze souboru (getch) a testování dosa¾ení konce souboru funkcí feof
	zjistìte délku souboru &#8211; délku vytisknìte. Program pøelo¾te a
	spus»te.</p>
	</li><li><p>Do cyklu while doplòte tisk na konzolu (funkce putchar).
	Program pøelo¾te a spus»te.</p>
	</li><li><p>Pro výstup na monitor (konzolu) je pøeddefinovaný
	&#8222;soubor&#8220;/stream (s názvem promìnné) stdout. Zapi¹te tuto
	hodnotu do promìnné pro výstupní soubor a tisk z bodu 4 zmìòte tak
	aby se tisklo do výstupního streamu (pomocí pou¾ití pøíslu¹né
	promìnné) místo pøíkazu pro tisk na konzolu. Program pøelo¾te a
	spus»te.</p>
	</li><li><p>Nyní pøipravte výstupní stream podle jména (souboru). Soubor
	je nutné otevøít pokud neexistuje &#8211; pokud existuje, pak se
	otevøení neprovede. Proveïte otevøení a vypi¹te zprávu o výsledku na
	monitor. V pøípadì, ¾e se nepovedlo soubor otevøít, program ukonèete
	&#8211; nezapomeòte, ¾e je ji¾ otevøen vstupní soubor, který je
	nutné uzavøít (pøed ka¾dým ukonèením programu &#8211; pøed ka¾dým
	returnem v main). Stejnì tak je nutné zavøít na konci programu
	výstupní soubor v pøípadì, ¾e se ho podaøilo otevøít. Program
	pøelo¾te a spus»te. V pøípadì správnosti by mìla být po ukonèení
	programu ve výstupním souboru kopie souboru vstupního.</p>
	</li><li><p>V nastavení parametrù prostøedí pøekladaèe najdìte zadání
	argumentù (tj. textu, který bude vlo¾en na pøíkazovou øádku za název
	volaného souboru a dostane se do programu jako parametr funkce main.
	Parametry lze nastavit sekci debuger &#8211; argumenty.<br>Pøi
	volání kopiruj.exe zdroj.txt cil.txt se do argumentù uvede zdroj.txt
	cil.txt.<br>Prototyp funkce main bude int main(int Pocet_parametru,
	char *text[]). <br>Pro nás tedy budou tøi parametry &#8211; název
	spou¹tìného souboru, dosa¾itelný pomocí text[0], název vstupního
	souboru dosa¾itelný pøes text[1] a název výstupního souboru
	dosa¾itelný pøes text[2].<br>Nastavte parametry v prostøedí, upravte
	hlavièku funkce main a na zaèátku programu vytisknìte poèet a názvy
	zadaných promìnných. Program pøelo¾te a spus»te.</p>
	</li><li><p>Zkuste najít v adresáøové struktuøe pøekládaný exe soubor a
	spustit ho s pøíkazové øádky spoleènì s názvy souborù (servant
	salamandr, nebo spustit konzolu pomocí pøíkazu cmd).</p>
	</li><li><p>Vymìòte jména otevíraných souborù z definovaných øetìzcù z
	bodu 2) na názvy souborù pøedané z pøíkazové øádky. Pøed pokusem o
	otevøení zahlaste chybu, pokud na øádku nebude správný poèet
	parametrù. Program pøelo¾te a spus»te.</p>
	</li><li><p>Program pro kopírování rozdìlte tak, aby otevøení, zavøení a
	kontroly byly v main a pro vlastní kopírování souboru vytvoøte
	funkci (bude mít dva parametry typu FILE*). Program pøelo¾te a
	spus»te.</p>
	</li><li><p>Funkci pro kopírování pøesuòte do samostatného zdrojového
	souboru. Vytvoøte pøíslu¹ný hlavièkový soubor &#8211; nezapomeòte na
	o¹etøení vícenásobného naètení. Soubor naincludujte do obou
	zdrojových souborù. Program pøelo¾te a spus»te.</p>
	</li><li><p>Zkuste co se stane v pøípadì, ¾e do funkce pro kopii po¹lete
	na místì vstupního souboru promìnnou stdin, nebo na místì výstupního
	stdout (v rùzných kombinacích i s otevøenými soubory).</p>
</li></ol>
<p><br><br>
</p>
<p><br><br>
</p>
<p><font size="4" style="font-size: 16pt"><b>Zji¹tìní statistiky znakù
v souboru</b></font></p>
<p>Napi¹te program, který vypí¹e tabulku ASCII hodnot znakù, jejich
absolutní poèet a jejich procentní zastoupení v souboru. Vyjdìte z
programu pro kopii souborù s tím, ¾e bude dodán je¹tì dal¹í parametr
na øádku a to poèet procent &#8211; tisknout se budou jen znaky,
které pøesáhnou tuto hranici.</p>
<p><br><br>
</p>
<p><b>Postup øe¹ení:</b></p>
<ol>
	<li value="1"><p>Vyjdìte z programu pro kopírování souborù. Pokud
	budete v tomto programu pokraèovat, nezapomeòte, ¾e jste ji¾ dosáhli
	konce souboru a proto se musíte vrátit na zaèátek (alternativy
	(která je nejlep¹í?): zavøení a nové otevøení, funkce fseek, funkce
	rewind).</p>
	</li><li><p>V main vytvoøte promìnné pro statistiku (pole celých èísel o
	délce rovné poètu znakù &#8211; pro ka¾dý výskyt znaku se pozice
	odpovídající jeho ASCII hodnotì zvý¹í o jedna). Dále vytvoøte
	promìnnou pro limit procent a naplòte ji nulou nebo hodnotou dodanou
	z pøíkazové øádky.</p>
	</li><li><p>Úpravou funkce pro kopii naplòte pole statistiky. Funkce bude
	mít navíc parametr pole statistiky. Nebude tisknout do výstupu (a
	tedy nebude mít jako parametr výstupní soubor), pouze
	&#8222;projede&#8220;soubor a naplní pole poèty znakù. Program
	pøelo¾te a spus»te.</p>
	</li><li><p>Napi¹te funkci, které pøedáte pole statistiky, limit procent
	a název výstupního streamu. Funkce bude procházet tabulku a pokud
	znak pøesáhne daný limit procent, bude vyti¹tìn do streamu ve
	formátu &#8211; ASCII kód znaku (hexa), poèet znakù, procent.
	Program pøelo¾te a spus»te.</p>
</li></ol>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p>Poslední zmìna 2014-03-17</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>
<p><br><br>
</p>

</body></html>